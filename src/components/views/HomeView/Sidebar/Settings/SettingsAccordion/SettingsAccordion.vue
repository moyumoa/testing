<script setup>
// ğŸ‘‰ å¯¼å…¥ Vue ç›¸å…³ API
import { ref } from "vue";

// ğŸ‘‰ å¯¼å…¥æ¯ä¸ªè®¾ç½®åŒºåŸŸçš„ç»„ä»¶
import AccountSettings from "@src/components/views/HomeView/Sidebar/Settings/SettingsAccordion/AccountSettings.vue";
import PrivacySettings from "@src/components/views/HomeView/Sidebar/Settings/SettingsAccordion/PrivacySettings.vue";
import AppearanceSettings from "@src/components/views/HomeView/Sidebar/Settings/SettingsAccordion/AppearanceSettings.vue";
import NotificationsSettings from "@src/components/views/HomeView/Sidebar/Settings/SettingsAccordion/NotificationsSettings.vue";

// ğŸ‘‰ é¢„è®¾æ‰‹é£ç´æ¯é¡¹çš„ key åï¼ˆç”¨äºé€»è¾‘åˆ¤æ–­ï¼‰
const accordionItems = {
  accountSettings: "account-settings",
  privacySettings: "privacy-settings",
  appearanceSettings: "appearance-settings",
  notificationsSettings: "notifications-settings",
};

// ğŸ‘‰ æ§åˆ¶æ¯ä¸€é¡¹æ˜¯å¦æŠ˜å 
const accordionState = ref({
  "account-settings": true,
  "privacy-settings": true,
  "appearance-settings": true,
  "notifications-settings": true,
});

// ğŸ‘‰ ç‚¹å‡»æŸé¡¹æ—¶ï¼Œåªå±•å¼€è¯¥é¡¹ï¼Œå…¶å®ƒæ”¶èµ·
const handleToggle = (name) => {
  for (let key of Object.keys(accordionState.value)) {
    if (key !== name) {
      accordionState.value[key] = true; // å…¶å®ƒé¡¹æ”¶èµ·
    }
  }
  // å½“å‰é¡¹å±•å¼€/æŠ˜å åˆ‡æ¢
  accordionState.value[name] = !accordionState.value[name];
};
</script>

<template>
  <!-- è®¾ç½®é¡µé¢çš„æ‰‹é£ç´åŒºåŸŸ -->
  <div
    role="list"
    aria-label="è®¾ç½®é€‰é¡¹å¡æŒ‰é’®ç»„"
    class="h-full"
  >
    <AccountSettings
      :collapsed="accordionState['account-settings']"
      :handle-toggle="() => handleToggle(accordionItems.accountSettings)"
    />
    <PrivacySettings
      :collapsed="accordionState['privacy-settings']"
      :handle-toggle="() => handleToggle(accordionItems.privacySettings)"
    />
    <AppearanceSettings
      :collapsed="accordionState['appearance-settings']"
      :handle-toggle="() => handleToggle(accordionItems.appearanceSettings)"
    />
    <NotificationsSettings
      :collapsed="accordionState['notifications-settings']"
      :handle-toggle="() => handleToggle(accordionItems.notificationsSettings)"
    />
  </div>
</template>
