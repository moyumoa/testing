<script setup>
// ğŸ‘‰ å¯¼å…¥ Store å’Œç»„ä»¶
import useStore from "@src/store/store";

import AccordionButton from "@src/components/ui/data-display/AccordionButton.vue";
import Collapse from "@src/components/ui/utils/Collapse.vue";
import SettingsSwitch from "@src/components/views/HomeView/Sidebar/Settings/SettingsAccordion/SettingsSwitch.vue";

// ğŸ‘‰ æ¥æ”¶å¤–éƒ¨ä¼ å…¥çš„å±æ€§
const props = defineProps({
  collapsed: Boolean,
  handleToggle: Function,
});

const store = useStore();
</script>

<template>
  <!--éšç§è®¾ç½®-->
  <AccordionButton
    id="privacy-settings-toggler"
    class="w-full flex px-5 py-6 mb-3 rounded focus:outline-none"
    :collapsed="props.collapsed"
    chevron
    aria-controls="privacy-settings-collapse"
    @click="props.handleToggle()"
  >
    <p class="mb-4 heading-2 text-black/70 dark:text-white/70">
      Privacy & Safety
    </p>
    <p class="body-2 text-black/70 dark:text-white/70">
      æ§åˆ¶ä½ çš„éšç§é€‰é¡¹
    </p>
  </AccordionButton>

  <Collapse
    id="privacy-settings-collapse"
    :collapsed="props.collapsed"
  >
    <!--å±•ç¤ºä¸Šæ¬¡ç™»å½•æ—¶é—´-->
    <SettingsSwitch
      title="Show Last Seen"
      description="å…è®¸ä»–äººæŸ¥çœ‹ä½ ä¸Šæ¬¡ç™»å½•æ—¶é—´"
      :value="!!store.settings.lastSeen"
      :handle-toggle-switch="
        (value) => (store.settings.lastSeen = value)
      "
      class="mb-7"
    />
    <!--å·²è¯»å›æ‰§-->
    <SettingsSwitch
      title="Show Read Receipt"
      description="å…è®¸ä»–äººçœ‹åˆ°ä½ æ˜¯å¦å·²è¯»æ¶ˆæ¯"
      :value="!!store.settings.readReceipt"
      :handle-toggle-switch="
        (value) => (store.settings.readReceipt = value)
      "
      class="mb-7"
    />
    <!--ç¾¤èŠé‚€è¯·æƒé™-->
    <SettingsSwitch
      title="Joining Groups"
      description="å…è®¸ä»–äººå°†ä½ æ·»åŠ åˆ°ç¾¤ç»„"
      :value="!!store.settings.joiningGroups"
      :handle-toggle-switch="
        (value) => (store.settings.joiningGroups = value)
      "
      class="mb-7"
    />
    <!--ç§ä¿¡æƒé™-->
    <SettingsSwitch
      title="Private Messages"
      description="å…è®¸éè”ç³»äººå‘ä½ å‘é€æ¶ˆæ¯"
      :value="!!store.settings.privateMessages"
      :handle-toggle-switch="
        (value) => (store.settings.privateMessages = value)
      "
      class="mb-7"
    />
  </Collapse>
</template>
